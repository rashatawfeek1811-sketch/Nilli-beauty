:root{
  --bg: #0b1220;
  --panel: #0f1b31;
  --card: #101f3a;
  --text: #e9eef9;
  --muted: rgba(233,238,249,.72);
  --border: rgba(255,255,255,.09);
  --shadow: 0 14px 45px rgba(0,0,0,.35);

  --accent: #7c5cff;
  --accent2:#19d3ff;
  --good: #36d399;
  --warn: #fbbf24;
  --bad:  #fb7185;

  --radius: 16px;
  --radius2: 12px;
  --maxw: 1180px;

  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

[data-theme="light"]{
  --bg: #f6f8fc;
  --panel: #ffffff;
  --card: #ffffff;
  --text: #0d1b2a;
  --muted: rgba(13,27,42,.72);
  --border: rgba(13,27,42,.10);
  --shadow: 0 14px 45px rgba(16, 24, 40, .12);
  --accent: #4f46e5;
  --accent2:#0891b2;
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: var(--font);
  background: radial-gradient(1200px 700px at 20% -10%, rgba(124,92,255,.25), transparent 60%),
              radial-gradient(900px 500px at 90% 10%, rgba(25,211,255,.18), transparent 50%),
              var(--bg);
  color: var(--text);
}

a{ color: inherit; text-decoration: none; }
a:hover{ text-decoration: underline; }
.ext{ opacity:.9; font-weight:700; }
.dot{ opacity:.65; margin: 0 .35rem; }

.sr-only{
  position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

.skip-link{
  position:absolute; left:-999px; top:10px;
  background: var(--accent); color:white;
  padding:.6rem .9rem; border-radius: 10px;
  z-index: 9999;
}
.skip-link:focus{ left: 10px; }

.topbar{
  position: sticky; top:0; z-index:50;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(to bottom, rgba(5,10,20,.90), rgba(5,10,20,.70));
  backdrop-filter: blur(10px);
  display:flex; align-items:center; justify-content:space-between;
  padding: 14px 18px;
  gap: 16px;
}
[data-theme="light"] .topbar{
  background: linear-gradient(to bottom, rgba(255,255,255,.90), rgba(255,255,255,.70));
}

.brand__title{ font-weight: 800; letter-spacing:.2px; }
.brand__subtitle{ color: var(--muted); font-size: .92rem; margin-top: 2px; }

.search{
  display:flex; align-items:center; gap:8px;
  padding: 8px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: rgba(255,255,255,.04);
}
[data-theme="light"] .search{ background: rgba(13,27,42,.03); }
.search input{
  width: min(42vw, 520px);
  border:0; outline:0;
  background: transparent;
  color: var(--text);
  font-size: .95rem;
}
.search input::placeholder{ color: rgba(233,238,249,.55); }
[data-theme="light"] .search input::placeholder{ color: rgba(13,27,42,.45); }

.btn{
  border: 1px solid var(--border);
  background: rgba(255,255,255,.04);
  color: var(--text);
  border-radius: 14px;
  padding: .62rem .85rem;
  font-weight: 650;
  cursor: pointer;
  transition: transform .06s ease, background .15s ease, border-color .15s ease;
}
.btn:hover{ background: rgba(255,255,255,.07); }
.btn:active{ transform: translateY(1px); }
.btn--primary{
  background: linear-gradient(135deg, var(--accent), #5ad6ff);
  border-color: rgba(255,255,255,.18);
  color: white;
}
.btn--ghost{ background: rgba(255,255,255,.03); }
.btn--tiny{
  padding: .38rem .6rem;
  border-radius: 12px;
  font-weight: 700;
  font-size: .86rem;
}

.layout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap: 18px;
  align-items:start;
  max-width: calc(var(--maxw) + 360px);
  margin: 0 auto;
  padding: 18px;
}

.sidebar{
  position: sticky;
  top: 74px;
  height: calc(100vh - 92px);
  overflow:auto;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: rgba(255,255,255,.03);
  box-shadow: var(--shadow);
  padding: 14px;
}
[data-theme="light"] .sidebar{ background: rgba(13,27,42,.02); }

.sidebar__heading{
  font-size: .85rem;
  text-transform: uppercase;
  letter-spacing:.12em;
  color: var(--muted);
  margin: 6px 0 10px;
}
.sidebar__section{ margin-bottom: 14px; }

.chip{
  display:inline-block;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .35rem .6rem;
  font-size: .85rem;
  color: var(--muted);
  margin: 4px 6px 0 0;
}
.chip:hover{ color: var(--text); text-decoration:none; border-color: rgba(255,255,255,.18); }

.toc__title{
  font-weight: 800;
  margin: 8px 0 8px;
}
.toc__link{
  display:block;
  padding: .5rem .55rem;
  border-radius: 12px;
  color: var(--muted);
  border: 1px solid transparent;
}
.toc__link:hover{
  color: var(--text);
  border-color: var(--border);
  background: rgba(255,255,255,.04);
  text-decoration:none;
}
.toc__link.is-active{
  color: white;
  background: linear-gradient(135deg, rgba(124,92,255,.55), rgba(25,211,255,.35));
  border-color: rgba(255,255,255,.18);
}

.sidebar__footer{
  border-top: 1px solid var(--border);
  margin-top: 12px;
  padding-top: 12px;
}

.main{
  min-width: 0;
  padding-bottom: 64px;
}

.card{
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: rgba(255,255,255,.03);
  box-shadow: var(--shadow);
  padding: 16px;
  margin-bottom: 18px;
}
[data-theme="light"] .card{ background: rgba(255,255,255,.92); }

.card--hero{
  padding: 18px;
  background: linear-gradient(135deg, rgba(124,92,255,.22), rgba(25,211,255,.12));
  border-color: rgba(255,255,255,.14);
}
.card__header h1{
  margin: 0 0 10px;
  font-size: clamp(1.6rem, 2.0vw, 2.1rem);
}
.meta{ display:flex; gap:8px; flex-wrap: wrap; }

.pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .35rem .65rem;
  font-size: .86rem;
  color: var(--muted);
  background: rgba(255,255,255,.03);
}
.pill--soft{
  background: rgba(255,255,255,.03);
}
.section-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 12px;
}
.section-head h2{ margin:0; font-size: 1.18rem; }
.permalink{ opacity: .65; font-weight: 900; margin-left: 6px; }
.permalink:hover{ opacity: 1; text-decoration:none; }

.grid{ display:grid; gap: 14px; }
.grid--2{ grid-template-columns: repeat(2, minmax(0,1fr)); }
.grid--3{ grid-template-columns: repeat(3, minmax(0,1fr)); }

.stat{
  border: 1px solid var(--border);
  border-radius: var(--radius2);
  padding: 12px;
  background: rgba(255,255,255,.03);
}
.stat__label{ color: var(--muted); font-size: .86rem; }
.stat__value{ font-weight: 850; margin-top: 6px; }
.stat__note{ color: var(--muted); margin-top: 4px; font-size: .88rem; }

.panel{
  border: 1px solid var(--border);
  border-radius: var(--radius2);
  padding: 12px;
  background: rgba(255,255,255,.03);
}
.panel h3, .panel h4{ margin-top: 0; }
.panel--good{ border-color: rgba(54,211,153,.35); }
.panel--warn{ border-color: rgba(251,191,36,.35); }
.panel--bad{ border-color: rgba(251,113,133,.35); }

.block{ margin-top: 12px; }
.summary{
  cursor: pointer;
  font-weight: 850;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: rgba(255,255,255,.03);
}
details[open] > .summary{ border-bottom-left-radius: 0; border-bottom-right-radius: 0; }
details .content{
  border: 1px solid var(--border);
  border-top: 0;
  padding: 12px;
  border-bottom-left-radius: 14px;
  border-bottom-right-radius: 14px;
  background: rgba(255,255,255,.02);
}

.callouts{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 12px; }
.callout{
  border: 1px solid var(--border);
  border-radius: var(--radius2);
  padding: 12px;
  background: rgba(255,255,255,.03);
}
.callout__title{ font-weight: 900; margin-bottom: 6px; }
.callout__body{ color: var(--muted); }
.callout--info{ border-color: rgba(25,211,255,.35); }
.callout--good{ border-color: rgba(54,211,153,.35); }
.callout--warn{ border-color: rgba(251,191,36,.35); }
.callout--bad { border-color: rgba(251,113,133,.35); }

.table-wrap{ overflow:auto; border-radius: 14px; border: 1px solid var(--border); }
table{ width:100%; border-collapse: collapse; min-width: 820px; }
th, td{ padding: 10px 12px; border-bottom: 1px solid var(--border); vertical-align: top; }
th{ text-align:left; font-size:.9rem; color: var(--muted); background: rgba(255,255,255,.03); }
tr:hover td{ background: rgba(255,255,255,.02); }

.code{
  font-family: var(--mono);
  font-size: .9rem;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: rgba(0,0,0,.22);
  overflow:auto;
  line-height: 1.35;
}
[data-theme="light"] .code{ background: rgba(13,27,42,.05); }

.matrix{ margin-top: 14px; }
.matrix__title{ font-weight: 900; margin: 0 0 10px; }

.muted{ color: var(--muted); }
.small{ font-size: .9rem; }
kbd{
  font-family: var(--mono);
  border: 1px solid var(--border);
  border-bottom-width: 2px;
  padding: 0 .35rem;
  border-radius: 8px;
  background: rgba(255,255,255,.03);
}

.score{
  display:flex;
  align-items: baseline;
  gap: 12px;
  margin: 6px 0 14px;
}
.score__big{
  font-weight: 950;
  font-size: 2.7rem;
  letter-spacing: -0.03em;
}
.score__small{ font-size: 1.2rem; opacity: .8; margin-left: 2px; }
.score__note{ color: var(--muted); }

.bar{
  height: 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.04);
  position: relative;
  overflow: hidden;
}
.bar::before{
  content:"";
  position:absolute; left:0; top:0; bottom:0;
  width: calc(var(--w, 0) * 1%);
  background: linear-gradient(90deg, rgba(124,92,255,.9), rgba(25,211,255,.8));
  border-radius: 999px;
}

.timeline{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}
.timeline__col{
  border: 1px solid var(--border);
  border-radius: var(--radius2);
  padding: 12px;
  background: rgba(255,255,255,.03);
}
.timeline__title{ font-weight: 900; margin-bottom: 8px; }

.footer{
  margin-top: 10px;
  padding-bottom: 32px;
}

.btn--floating{
  position: fixed;
  right: 18px;
  bottom: 18px;
  box-shadow: var(--shadow);
  display:none;
}

/* Search highlight */
mark{
  background: rgba(251,191,36,.28);
  color: inherit;
  padding: 0 .2em;
  border-radius: 6px;
  border: 1px solid rgba(251,191,36,.25);
}

/* Responsive */
@media (max-width: 1060px){
  .layout{ grid-template-columns: 1fr; }
  .sidebar{
    position: relative;
    top: 0;
    height: auto;
  }
  .search input{ width: min(70vw, 520px); }
  table{ min-width: 720px; }
  .timeline{ grid-template-columns: 1fr; }
  .grid--3{ grid-template-columns: 1fr; }
  .grid--2{ grid-template-columns: 1fr; }
  .callouts{ grid-template-columns: 1fr; }
}

/* Print */
@media print{
  .topbar, .sidebar, #backToTopBtn, .copylink { display:none !important; }
  body{ background: white; color: #111; }
  .card{ box-shadow:none; background: white; border-color: #ddd; }
  a{ color:#111; text-decoration: underline; }
}
